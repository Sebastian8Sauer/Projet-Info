%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% This is a test version of FlatPartition without the transformations

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

declare
fun {FlatPartition Partition}
   case Partition of H|T 
   then
      if {IsList H}
      then
	 if{IsExtendedChord H}
	 then H|{FlatPartition T}
	 else {ChordToExtended H}|{FlatPartition T}
	 end

      elseif {IsNote H}
      then {NoteToExtended H}|{FlatPartition T}
      
      elseif {IsExtendedNote H}
      then H|{FlatPartition T}

      else error|{FlatPartition T}
      
      end
      
   []nil then nil
   
   end
end
